# 一致性哈希与随机树：一种用于缓解万维网热点问题的分布式缓存协议

## 摘要
我们介绍了用于分布式网络的缓存协议族，可以解决或消除网络上热点的发生。我们的协议特别针对大型网络来设计的，例如因热点引起的延迟非常严重的因特网和每个服务器都无法获得有关整个网络当前状态的完整信息的大型网络。这个协议用现存网络的协议例如tcp/ip来实现很简单，并且开销很小。协议通过节点自身进行控制，无需额外节点实现（The protocols work with local control），高效利用现存资源并随着网络的发展可以很优雅的拓展。

我们的协议基于一种特殊的哈希算法，我们叫它一致性哈希算法。大致来说，只需要微小的改动就可以适用大部分场景。有了优秀的一致性哈希函数，我们能开发出不需要用户拥有当前甚至一致的网络视图的缓存协议。我们坚信一致性哈希函数能最终被证实它对其他应用例如分布式域名解析服务器（ distributed name
servers ）或quorum机制是有作用的。

## 1 介绍

在这篇论文里，我们介绍多种用于在分布式网络中减少或者消除热点问题发生的缓存协议。当多个客户端同时访问同一个服务器的时，热点问题随时都有可能发生。如果站点无法同时为所有的客户同时提供服务，那么服务很有可能会被严重影响甚至发生故障。

我们中的许多人在使用网络的时候都经历过热点现象。一个网络站点可能会突然间变得很流行并在短时间内收到大量的请求，这远远超出了它最开始所赋予的处理能力。实际上，一个站点可能就收到许多请求以至于其变得无法使用。除了让某个站点无法访问，大量的集中到某个位置的流量还可能会导致其附近的网络发生拥堵，干扰到附近站点的流量。

随着网络的普及，热点问题发生的可能性与影响都随之增大。最近几个有名的热点故障的例子包括 在休梅克－利维 9 号彗星与木星相撞后的JPL（美国喷射推进实验室） 的站点，深蓝与卡斯帕罗夫的国际象棋比赛时的 IBM 站点，以及选举之夜的政府网站。这些站点中的一部分导致用户在几个小时甚至几天的时间内被站点拒绝访问。其他例子包括那些“今日站点”或者提供流行软件更新的站点。

我们最开始的工作动机就是解决由于热点导致的万维网问题。我们相信我们开发的工具可能会对许多 CS 模型有帮助，因为许多互联网中心化的互联网服务包括 DNS、多播服务、以及内容标记服务都对热点问题很敏感。

## 1.1 过去的做法

过去有几种推荐的解决热点问题的方法，绝大多数都是利用某种复制策略在网络上存储热页面（hot page，或译高频访问页面）的副本；这增大了在多个服务器上提供热页面的工作。还有一种方法，仍被广泛使用，那就是多个客户端上分享同一个代理缓存。所有的客户端要把请求发送给缓存了高频访问页面副本的代理服务器。它试图缓存副本来满足请求；缓存命中失败才把请求发送给主服务器。这种方案的缺点就是用户越多作用越大，用户太少的话没有起多大作用，而缓存的本身也很容易失效。